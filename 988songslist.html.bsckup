<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1280, initial-scale=1.0">
  <title>Playlist 988 FM</title>
  <style>
    body {
      margin: 0;
      background-color: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: "Microsoft YaHei", Arial, sans-serif;
      color: #ddd;
    }

    .screen {
      width: 1280px;
      height: 520px;
      background-color: #111;
      border: 4px solid #777;
      border-radius: 16px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 0 25px rgba(0,0,0,0.6);
      padding: 20px;
    }

    .logo {
      position: absolute;
      top: 10px;
      left: 10px;
      width: 150px;
    }

    .title {
      position: absolute;
      top: 45px;
      right: 50px;
      font-size: 24px;
      color: #ccc;
      font-weight: bold;
      letter-spacing: 1px;
    }

    table {
      position: absolute;
      top: 110px;
      left: 20px;
      width: 1280px;
      border-collapse: collapse;
      font-size: 15px;
    }

    th, td {
      text-align: left;
      padding: 8px 12px;
      border-bottom: 1px solid #444;
    }

    th {
      color: #aaa;
      font-weight: normal;
      font-size: 18px;
    }

    tr:hover td {
      background-color: rgba(255,255,255,0.05);
    }

    .time {
      width: 120px;
      color: #999;
      font-size: 18px;
    }

    .song {
      color: #eee;
    }
  </style>
</head>
<body>
  <div class="screen">
    <img src="https://raw.githubusercontent.com/SGolden58/svg/main/Logo/988.png" class="logo" alt="988">
    <div class="title">Song List</div>

    <table id="Songs List">
      <tr><th class="time">时间</th><th>歌手 + 歌曲</th></tr>
      <tr><td colspan="2">加载中… Loading latest songs…</td></tr>
    </table>
  </div>

  <script>
    async function updatePlaylist() {
      try {
        const proxy = "https://api.allorigins.win/raw?url=";
        const url = "https://online-radio.my/12-988-fm.html";
        const res = await fetch(proxy + encodeURIComponent(url));
        const html = await res.text();

        const temp = document.createElement("div");
        temp.innerHTML = html;

        // Extract text that looks like "13:25 半吨兄弟 - 爱就一个字 (原唱:张信哲)"
        const allText = temp.innerText.split("\n").map(t => t.trim()).filter(t => t);
        const playlist = [];
        for (const t of allText) {
          const match = t.match(/^(\d{1,2}:\d{2})\s+(.*?-\s*.*)$/);
          if (match) {
            playlist.push({ time: match[1], song: match[2] });
          }
        }

        const table = document.getElementById("playlistTable");
        table.innerHTML = `<tr><th class="time">时间</th><th>歌曲 / Artist - Title</th></tr>`;

        if (playlist.length === 0) {
          table.innerHTML += `<tr><td colspan="2">未找到播放列表 / No songs found</td></tr>`;
        } else {
          playlist.slice(0, 10).forEach(p => {
            const row = `<tr><td class="time">${p.time}</td><td class="song">${p.song}</td></tr>`;
            table.innerHTML += row;
          });
        }
      } catch (e) {
        document.getElementById("playlistTable").innerHTML =
          `<tr><td colspan="2">无法加载播放列表 / Unable to load playlist</td></tr>`;
      }
    }

    updatePlaylist();
    setInterval(updatePlaylist, 60000);
  </script>
</body>
</html>
